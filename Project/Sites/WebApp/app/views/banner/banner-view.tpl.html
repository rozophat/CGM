<style>
	.my-drop-zone {
		border: dotted 3px lightgray;
	}

	.nv-file-over {
		border: dotted 3px red;
	}
	/* Default class applied to drop zones on over */
	.another-file-over-class {
		border: dotted 3px green;
	}

	html, body {
		height: 100%;
	}
</style>
<div class="row">
	<div class="col-md-12">
		<!-- BEGIN PAGE TITLE & BREADCRUMB-->
		<h3 class="page-title">Edit Banner
		</h3>
		<ul class="page-breadcrumb breadcrumb">
			<li>
				<i class="fa fa-home"></i>
				<a href="javascript:void()">Home</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>
				<a ui-sref="accounts">Accounts</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>
				<a ui-sref="account-view({id: Banner.AccountId, tab: 1, page: 1})">Account: {{Banner.AccountId}}</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>
				<a ui-sref="banners">Banners</a>
				<i class="fa fa-angle-right"></i>
			</li>
			<li>
				<span>View Banner</span>
			</li>
			<li class="pull-right">
				<div id="dashboard-report-range" class="dashboard-date-range tooltips" data-placement="top" data-original-title="Change dashboard date range">
					<i class="fa fa-calendar"></i>
					<span></span>
					<i class="fa fa-angle-down"></i>
				</div>
			</li>
		</ul>
		<!-- END PAGE TITLE & BREADCRUMB-->
	</div>
</div>
<!-- END PAGE HEADER-->
<div class="row">
	<div class="col-md-12">

		<div class="tabbable tabbable-custom">
			<ul class="nav nav-tabs">
				<li ng-class="{active:isSet(1)}"><a href="javascript:;" ng-click="setTab(1)"><i class="fa fa-info-circle fa-fw"></i>Information</a></li>
				<li ng-class="{active:isSet(2)}"><a href="javascript:;" ng-click="setTab(2)"><i class="fa fa-upload fa-fw"></i>Uploader</a></li>
				<li ng-class="{active:isSet(3)}"><a href="javascript:;" ng-click="setTab(3)"><i class="fa fa-file-image-o fa-fw"></i>Images</a></li>
			</ul>

			<div class="tab-content">
				<div class="tab-pane" ng-class="{active:isSet(1)}" ng-show="isSet(1)">
					<!-- BEGIN FORM-->
					<ng-form name="bannerEditForm" class="form-horizontal">
						<div class="form-body">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group" ng-class="{'has-error': bannerEditForm.Title.$invalid && !bannerEditForm.Title.$pristine}">
										<label class="control-label col-md-3">Title<span class="required">*</span></label>
										<div class="col-md-9">
											<input type="text" name="Title" ng-model="Banner.Title" required show-errors class="form-control">
											<span class="help-block" ng-show="bannerEditForm.Title.$invalid && !bannerEditForm.Title.$pristine">
												This field is required
											</span>
										</div>
									</div>
								</div>
								<!--/span-->
								<div class="col-md-6">
									<div class="form-group" ng-class="{'has-error': bannerEditForm.Description.$invalid && !bannerEditForm.Description.$pristine}">
										<label class="control-label col-md-3">Description<span class="required">*</span></label>
										<div class="col-md-9">
											<textarea type="text" name="Description" ng-model="Banner.Description" required show-errors class="form-control"></textarea>
											<span class="help-block" ng-show="bannerEditForm.Description.$invalid && !bannerEditForm.Description.$pristine">
												This field is required
											</span>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Destination Type</label>
										<div class="col-md-9">
											<select class="form-control" ng-model="Banner.DestinationType">
												<option value="L">Listing</option>
												<option value="U">Url</option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Destination</label>
										<div class="col-md-9">
											<input type="text" name="Destination" ng-model="Banner.Destination" class="form-control">
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Start DateTime</label>
										<div class="col-md-9">
											<input type="text" name="StartDateTime" class="form-control date" ng-model="Banner.StartDateTime" bs-datepicker
											       bs-show="showStartDatePicker" ng-blur="showStartDatePicker = false" ng-click="showStartDatePicker = true">
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">End DateTime</label>
										<div class="col-md-9">
											<input type="text" name="EndDateTime" class="form-control date" ng-model="Banner.EndDateTime" bs-datepicker
											       bs-show="showEndDatePicker" ng-blur="showEndDatePicker = false" ng-click="showEndDatePicker = true">
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Paid</label>
										<div class="col-md-9">
											<input type="text" name="Paid" ng-model="Banner.Paid" class="form-control" readonly>
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">TransactionId</label>
										<div class="col-md-9">
											<input type="text" name="TransactionId" ng-model="Banner.TransactionId" class="form-control" readonly>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">City</label>
										<div class="col-md-9">
											<input type="text" name="City" class="form-control" ng-model="Banner.City">
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Province State</label>
										<div class="col-md-9">
											<input type="text" name="ProvinceState" class="form-control" ng-model="Banner.ProvinceState">
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Country</label>
										<div class="col-md-9">
											<input type="text" name="Country" class="form-control" ng-model="Banner.Country">
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Category</label>
										<div class="col-md-9">
											<select class="form-control" name="CategoryId" ng-model="Banner.CategoryId" 
											        ng-options="a.Id as a.Name group by a.ParentCategoryName for a in Categories">
											</select>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label class="control-label col-md-3">Active</label>
										<div class="col-md-9">
											<select class="form-control" ng-model="Banner.Active">
												<option value="1">Yes</option>
												<option value="0">No</option>
											</select>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="fluid">
							<div class="row">
								<div class="col-md-6">
									<div class="col-md-offset-3 col-md-9">
										<button type="button" class="btn btn-success" ng-click="updateBanner()">Update Information</button>
										<button type="button" class="btn btn-default" ng-click="doTheBack()">Cancel</button>
									</div>
								</div>
								<div class="col-md-6">
								</div>
							</div>
						</div>
					</ng-form>
					<!-- END FORM-->
				</div>
				<div class="tab-pane" ng-class="{active:isSet(2)}" ng-show="isSet(2)">
					<div class="row" nv-file-drop="" uploader="uploader" filters="queueLimit, customFilter">
						<div class="col-md-3">
							<h3>Select files</h3>
							<div ng-show="uploader.isHTML5">
								<!-- 3. nv-file-over uploader="link" over-class="className" -->
								<div class="well my-drop-zone" nv-file-over="" uploader="uploader">
									Base drop zone
								</div>
							</div>
							Multiple
							<input type="file" nv-file-select="" uploader="uploader" multiple /><br />
							<!--Single
								<input type="file" nv-file-select="" uploader="uploader" />-->
						</div>
						<div class="col-md-9" style="margin-bottom: 40px">
							<h3>Upload queue</h3>
							<p>Queue length: {{ uploader.queue.length }}</p>
							<table class="table">
								<thead>
									<tr>
										<th width="50%">Name</th>
										<th ng-show="uploader.isHTML5">Size</th>
										<th ng-show="uploader.isHTML5">Progress</th>
										<th>Status</th>
										<th>Actions</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="item in uploader.queue">
										<td><strong>{{ item.file.name }}</strong></td>
										<td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
										<td ng-show="uploader.isHTML5">
											<div class="progress" style="margin-bottom: 0;">
												<div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
											</div>
										</td>
										<td class="text-center">
											<span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
											<span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
											<span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
										</td>
										<td nowrap>
											<button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
												<span class="glyphicon glyphicon-upload"></span>Upload
											</button>
											<button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
												<span class="glyphicon glyphicon-ban-circle"></span>Cancel
											</button>
											<button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
												<span class="glyphicon glyphicon-trash"></span>Clear
											</button>
										</td>
									</tr>
								</tbody>
							</table>
							<div>
								<div>
									Queue progress:
									<div class="progress" style="">
										<div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
									</div>
								</div>
								<button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
									<span class="glyphicon glyphicon-upload"></span>Upload all
								</button>
								<button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">
									<span class="glyphicon glyphicon-ban-circle"></span>Cancel all
								</button>
								<button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
									<span class="glyphicon glyphicon-trash"></span>Clear all
								</button>
							</div>
						</div>
					</div>
				</div>
				<div class="tab-pane" ng-class="{active:isSet(3)}" ng-show="isSet(3)">
					<div class="row">
						<div class="col-md-4">
							<table ng-table="tableBIParams" class="table table-striped table-bordered table-hover">
								<tr ng-repeat="row in $data" ng-form="rowForm">
									<td class="center" style="width: 50px" data-title="'Id'" ng-bind="(tableBIParams.page() - 1) * tableBIParams.count() + ($index + 1)"></td>
									<td class="center" data-title="'Image'">
										<img src="{{webapiUrl}}{{row.PictureDestination}}" width="100px" height="100px" />
									</td>
									<td style="text-align: center; vertical-align: middle" data-title="'Image Type'" sortable="'ImageType'" ng-switch="row.isEditing" ng-class="type.$dirty ? 'bg-warning' : ''" ng-form="type">
											<span ng-switch-default class="editable-text" ng-bind="getImageTypeName(row.ImageType)"></span>
											<div class="controls" ng-switch-when="true">
												<select class="editable-input form-control input-sm" name="type" ng-model="row.ImageType">
													<option ng-repeat="option in BannerImageTypes" ng-selected ="{{row.ImageType == option.Id}}" value="{{option.Id}}">{{option.Name}}</option>
												</select>
											</div>
										</td>
									<td class="center" style="width: 150px">
										<button class="btn btn-primary btn-sm" ng-click="save(row, rowForm)" ng-if="row.isEditing" ng-disabled="rowForm.$pristine || rowForm.$invalid"><span class="glyphicon glyphicon-ok"></span></button>
										<button class="btn btn-default btn-sm" ng-click="cancel(row, rowForm)" ng-if="row.isEditing"><span class="glyphicon glyphicon-remove"></span></button>
										<button class="btn btn-default btn-sm" ng-click="row.isEditing = true" ng-if="!row.isEditing"><span class="glyphicon glyphicon-pencil"></span></button>
										<button class="btn btn-danger btn-sm ng-scope" ng-click="showDeleteBIConfirmation(row.BannerId, row.Id)"><span class="glyphicon glyphicon-trash"></span></button>
									</td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
</div>
